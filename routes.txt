package handlers

import (
	"fmt"
	"log"

	"github.com/gin-gonic/gin"
	"main.go/pkg/constants"
)

func StartRoutes() {
	r := gin.New()

	//Open points
	r.POST("/login", Login)
	r.POST("/register", CreateUser)
	//Closed points
	cl := r.Group(constants.ApiPrefix, JwtAuthMiddleware())
	{
		cl.POST("/CreateUser", CreateUser)
		cl.DELETE("/DeleteUser/:id", DeleteUserById)
		cl.GET("/GetUsers", GetUsers)
		cl.GET("/GetUserById/:id", GetUserById)

		cl.POST("/CreateSchool", CreateSchool)
		cl.GET("/GetSchools", GetSchools)
		cl.GET("/GetSchoolById/:id", GetSchoolById)
		cl.DELETE("/DeleteSchool/:id", DeleteSchoolById)

		cl.POST("/CreateUniversity", CreateUni)
		cl.DELETE("/DeleteUniversity/:id", DeleteUniById)
		cl.GET("/GetUniversities", GetUnis)
		cl.GET("/GetUniversity/:id", GetUniById)

		cl.POST("/CreateCity", CreateCity)
		cl.DELETE("/DeleteCity/:id", DeleteCityById)
		cl.GET("/GetCities", GetCities)
	}

	err := r.Run()
	if err != nil {
		fmt.Println("Running error:", err)
		log.Println(err)
	}
	log.Println("Success.")
}
